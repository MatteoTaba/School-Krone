{"id":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","dependencies":[{"name":"C:\\Users\\matte\\Documents\\SKR\\package.json","includedInParent":true,"mtime":1638722727563},{"name":"C:\\Users\\matte\\Documents\\SKR\\node_modules\\libp2p\\package.json","includedInParent":true,"mtime":1638722718888},{"name":"debug","loc":{"line":3,"column":22},"parent":"C:\\Users\\matte\\Documents\\SKR\\node_modules\\libp2p\\src\\circuit\\circuit\\stream-handler.js","resolved":"C:\\Users\\matte\\Documents\\SKR\\node_modules\\debug\\src\\browser.js"},{"name":"it-length-prefixed","loc":{"line":8,"column":19},"parent":"C:\\Users\\matte\\Documents\\SKR\\node_modules\\libp2p\\src\\circuit\\circuit\\stream-handler.js","resolved":"C:\\Users\\matte\\Documents\\SKR\\node_modules\\it-length-prefixed\\src\\index.js"},{"name":"it-handshake","loc":{"line":10,"column":26},"parent":"C:\\Users\\matte\\Documents\\SKR\\node_modules\\libp2p\\src\\circuit\\circuit\\stream-handler.js","resolved":"C:\\Users\\matte\\Documents\\SKR\\node_modules\\it-handshake\\src\\index.js"},{"name":"../protocol","loc":{"line":11,"column":33},"parent":"C:\\Users\\matte\\Documents\\SKR\\node_modules\\libp2p\\src\\circuit\\circuit\\stream-handler.js","resolved":"C:\\Users\\matte\\Documents\\SKR\\node_modules\\libp2p\\src\\circuit\\protocol\\index.js"}],"generated":{"js":"'use strict';\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar debug = require('debug');\n\nvar log = Object.assign(debug('libp2p:circuit:stream-handler'), {\n  error: debug('libp2p:circuit:stream-handler:err')\n});\n\nvar lp = require('it-length-prefixed'); // @ts-ignore it-handshake does not export types\n\n\nvar handshake = require('it-handshake');\n\nvar _require = require('../protocol'),\n    CircuitRelay = _require.CircuitRelay;\n/**\n * @typedef {import('libp2p-interfaces/src/stream-muxer/types').MuxedStream} MuxedStream\n * @typedef {import('../protocol').ICircuitRelay} ICircuitRelay\n */\n\n\nvar StreamHandler = /*#__PURE__*/function () {\n  /**\n   * Create a stream handler for connection\n   *\n   * @class\n   * @param {object} options\n   * @param {MuxedStream} options.stream - A duplex iterable\n   * @param {number} [options.maxLength = 4096] - max bytes length of message\n   */\n  function StreamHandler(_ref) {\n    var stream = _ref.stream,\n        _ref$maxLength = _ref.maxLength,\n        maxLength = _ref$maxLength === void 0 ? 4096 : _ref$maxLength;\n\n    _classCallCheck(this, StreamHandler);\n\n    this.stream = stream;\n    this.shake = handshake(this.stream); // @ts-ignore options are not optional\n\n    this.decoder = lp.decode.fromReader(this.shake.reader, {\n      maxDataLength: maxLength\n    });\n  }\n  /**\n   * Read and decode message\n   *\n   * @async\n   */\n\n\n  _createClass(StreamHandler, [{\n    key: \"read\",\n    value: function () {\n      var _read = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var msg, value;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.decoder.next();\n\n              case 2:\n                msg = _context.sent;\n\n                if (!msg.value) {\n                  _context.next = 7;\n                  break;\n                }\n\n                value = CircuitRelay.decode(msg.value.slice());\n                log('read message type', value.type);\n                return _context.abrupt(\"return\", value);\n\n              case 7:\n                log('read received no value, closing stream'); // End the stream, we didn't get data\n\n                this.close();\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function read() {\n        return _read.apply(this, arguments);\n      }\n\n      return read;\n    }()\n    /**\n     * Encode and write array of buffers\n     *\n     * @param {ICircuitRelay} msg - An unencoded CircuitRelay protobuf message\n     * @returns {void}\n     */\n\n  }, {\n    key: \"write\",\n    value: function write(msg) {\n      log('write message type %s', msg.type); // @ts-ignore lp.encode expects type type 'Buffer | BufferList', not 'Uint8Array'\n\n      this.shake.write(lp.encode.single(CircuitRelay.encode(msg).finish()));\n    }\n    /**\n     * Return the handshake rest stream and invalidate handler\n     *\n     * @returns {*} A duplex iterable\n     */\n\n  }, {\n    key: \"rest\",\n    value: function rest() {\n      this.shake.rest();\n      return this.shake.stream;\n    }\n    /**\n     * @param {ICircuitRelay} msg - An unencoded CircuitRelay protobuf message\n     */\n\n  }, {\n    key: \"end\",\n    value: function end(msg) {\n      this.write(msg);\n      this.close();\n    }\n    /**\n     * Close the stream\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      log('closing the stream');\n      this.rest().sink([]);\n    }\n  }]);\n\n  return StreamHandler;\n}();\n\nmodule.exports = StreamHandler;"},"sourceMaps":{"js":{"mappings":[{"generated":{"line":1,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":1,"column":0}},{"generated":{"line":13,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":3,"column":0}},{"name":"debug","generated":{"line":13,"column":4},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":3,"column":6}},{"generated":{"line":13,"column":9},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":3,"column":11}},{"name":"require","generated":{"line":13,"column":12},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":3,"column":14}},{"generated":{"line":13,"column":19},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":3,"column":21}},{"generated":{"line":13,"column":20},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":3,"column":22}},{"generated":{"line":13,"column":27},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":3,"column":21}},{"generated":{"line":13,"column":28},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":3,"column":0}},{"generated":{"line":15,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":4,"column":0}},{"name":"log","generated":{"line":15,"column":4},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":4,"column":6}},{"generated":{"line":15,"column":7},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":4,"column":9}},{"name":"Object","generated":{"line":15,"column":10},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":4,"column":12}},{"generated":{"line":15,"column":16},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":4,"column":18}},{"name":"assign","generated":{"line":15,"column":17},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":4,"column":19}},{"generated":{"line":15,"column":23},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":4,"column":12}},{"name":"debug","generated":{"line":15,"column":24},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":4,"column":26}},{"generated":{"line":15,"column":29},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":4,"column":31}},{"generated":{"line":15,"column":30},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":4,"column":32}},{"generated":{"line":15,"column":61},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":4,"column":31}},{"generated":{"line":15,"column":62},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":4,"column":12}},{"generated":{"line":15,"column":64},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":4,"column":66}},{"name":"error","generated":{"line":16,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":5,"column":2}},{"name":"error","generated":{"line":16,"column":2},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":5,"column":2}},{"generated":{"line":16,"column":7},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":5,"column":7}},{"name":"debug","generated":{"line":16,"column":9},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":5,"column":9}},{"generated":{"line":16,"column":14},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":5,"column":14}},{"generated":{"line":16,"column":15},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":5,"column":15}},{"generated":{"line":16,"column":50},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":5,"column":14}},{"generated":{"line":17,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":4,"column":66}},{"generated":{"line":17,"column":1},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":4,"column":12}},{"generated":{"line":17,"column":2},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":4,"column":0}},{"generated":{"line":19,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":8,"column":0}},{"name":"lp","generated":{"line":19,"column":4},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":8,"column":6}},{"generated":{"line":19,"column":6},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":8,"column":8}},{"name":"require","generated":{"line":19,"column":9},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":8,"column":11}},{"generated":{"line":19,"column":16},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":8,"column":18}},{"generated":{"line":19,"column":17},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":8,"column":19}},{"generated":{"line":19,"column":37},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":8,"column":18}},{"generated":{"line":19,"column":38},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":8,"column":0}},{"generated":{"line":19,"column":40},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":9,"column":0}},{"generated":{"line":22,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":10,"column":0}},{"name":"handshake","generated":{"line":22,"column":4},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":10,"column":6}},{"generated":{"line":22,"column":13},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":10,"column":15}},{"name":"require","generated":{"line":22,"column":16},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":10,"column":18}},{"generated":{"line":22,"column":23},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":10,"column":25}},{"generated":{"line":22,"column":24},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":10,"column":26}},{"generated":{"line":22,"column":38},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":10,"column":25}},{"generated":{"line":22,"column":39},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":10,"column":0}},{"generated":{"line":24,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":11,"column":0}},{"name":"require","generated":{"line":24,"column":15},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":11,"column":25}},{"generated":{"line":24,"column":22},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":11,"column":32}},{"generated":{"line":24,"column":23},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":11,"column":33}},{"generated":{"line":24,"column":36},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":11,"column":32}},{"generated":{"line":24,"column":37},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":11,"column":0}},{"generated":{"line":25,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":11,"column":0}},{"name":"CircuitRelay","generated":{"line":25,"column":4},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":11,"column":8}},{"generated":{"line":25,"column":16},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":11,"column":0}},{"name":"CircuitRelay","generated":{"line":25,"column":28},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":11,"column":8}},{"generated":{"line":25,"column":40},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":11,"column":0}},{"generated":{"line":26,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":13,"column":0}},{"generated":{"line":27,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":14,"column":0}},{"generated":{"line":28,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":15,"column":0}},{"generated":{"line":29,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":16,"column":0}},{"name":"StreamHandler","generated":{"line":32,"column":4},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":18,"column":6}},{"generated":{"line":33,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":19,"column":2}},{"generated":{"line":34,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":20,"column":0}},{"generated":{"line":35,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":21,"column":0}},{"generated":{"line":36,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":22,"column":0}},{"generated":{"line":37,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":23,"column":0}},{"generated":{"line":38,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":24,"column":0}},{"generated":{"line":39,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":25,"column":0}},{"generated":{"line":40,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":26,"column":0}},{"generated":{"line":41,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":27,"column":2}},{"generated":{"line":41,"column":31},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":27,"column":45}},{"generated":{"line":42,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":27,"column":45}},{"name":"stream","generated":{"line":42,"column":8},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":27,"column":17}},{"generated":{"line":42,"column":14},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":27,"column":45}},{"name":"stream","generated":{"line":42,"column":22},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":27,"column":17}},{"generated":{"line":42,"column":28},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":27,"column":45}},{"generated":{"line":43,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":27,"column":45}},{"name":"maxLength","generated":{"line":43,"column":30},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":27,"column":25}},{"generated":{"line":43,"column":39},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":27,"column":45}},{"generated":{"line":44,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":27,"column":45}},{"name":"maxLength","generated":{"line":44,"column":8},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":27,"column":25}},{"generated":{"line":44,"column":17},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":27,"column":45}},{"generated":{"line":44,"column":48},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":27,"column":37}},{"generated":{"line":44,"column":52},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":27,"column":45}},{"generated":{"line":46,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":27,"column":45}},{"generated":{"line":48,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":28,"column":4}},{"name":"stream","generated":{"line":48,"column":9},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":28,"column":9}},{"generated":{"line":48,"column":15},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":28,"column":4}},{"name":"stream","generated":{"line":48,"column":18},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":28,"column":18}},{"generated":{"line":48,"column":24},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":28,"column":4}},{"generated":{"line":49,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":30,"column":4}},{"name":"shake","generated":{"line":49,"column":9},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":30,"column":9}},{"generated":{"line":49,"column":14},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":30,"column":4}},{"name":"handshake","generated":{"line":49,"column":17},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":30,"column":17}},{"generated":{"line":49,"column":26},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":30,"column":26}},{"generated":{"line":49,"column":27},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":30,"column":27}},{"name":"stream","generated":{"line":49,"column":32},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":30,"column":32}},{"generated":{"line":49,"column":38},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":30,"column":26}},{"generated":{"line":49,"column":39},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":30,"column":4}},{"generated":{"line":49,"column":40},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":27,"column":45}},{"generated":{"line":49,"column":41},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":31,"column":4}},{"generated":{"line":51,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":4}},{"name":"decoder","generated":{"line":51,"column":9},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":9}},{"generated":{"line":51,"column":16},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":4}},{"name":"lp","generated":{"line":51,"column":19},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":19}},{"generated":{"line":51,"column":21},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":21}},{"name":"decode","generated":{"line":51,"column":22},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":22}},{"generated":{"line":51,"column":28},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":19}},{"name":"fromReader","generated":{"line":51,"column":29},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":29}},{"generated":{"line":51,"column":39},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":19}},{"generated":{"line":51,"column":40},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":40}},{"name":"shake","generated":{"line":51,"column":45},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":45}},{"generated":{"line":51,"column":50},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":40}},{"name":"reader","generated":{"line":51,"column":51},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":51}},{"generated":{"line":51,"column":57},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":19}},{"generated":{"line":51,"column":59},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":59}},{"name":"maxDataLength","generated":{"line":52,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":61}},{"name":"maxDataLength","generated":{"line":52,"column":6},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":61}},{"generated":{"line":52,"column":19},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":74}},{"name":"maxLength","generated":{"line":52,"column":21},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":76}},{"generated":{"line":53,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":59}},{"generated":{"line":53,"column":5},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":19}},{"generated":{"line":53,"column":6},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":32,"column":4}},{"generated":{"line":54,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":33,"column":3}},{"generated":{"line":55,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":35,"column":2}},{"generated":{"line":56,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":36,"column":0}},{"generated":{"line":57,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":37,"column":0}},{"generated":{"line":58,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":38,"column":0}},{"generated":{"line":59,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":39,"column":0}},{"generated":{"line":65,"column":74},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":66,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":67,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":68,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":69,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":70,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":71,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":72,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":72,"column":23},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":41,"column":22}},{"name":"decoder","generated":{"line":72,"column":28},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":41,"column":27}},{"generated":{"line":72,"column":35},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":41,"column":22}},{"name":"next","generated":{"line":72,"column":36},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":41,"column":35}},{"generated":{"line":72,"column":40},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":41,"column":22}},{"generated":{"line":72,"column":42},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":74,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"name":"msg","generated":{"line":75,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":41,"column":10}},{"name":"msg","generated":{"line":75,"column":16},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":41,"column":10}},{"generated":{"line":75,"column":19},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":77,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"name":"msg","generated":{"line":77,"column":21},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":42,"column":8}},{"generated":{"line":77,"column":24},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":42,"column":11}},{"name":"value","generated":{"line":77,"column":25},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":42,"column":12}},{"generated":{"line":77,"column":30},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":78,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":79,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":80,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"name":"value","generated":{"line":82,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":43,"column":12}},{"name":"value","generated":{"line":82,"column":16},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":43,"column":12}},{"generated":{"line":82,"column":21},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"name":"CircuitRelay","generated":{"line":82,"column":24},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":43,"column":20}},{"generated":{"line":82,"column":36},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":43,"column":32}},{"name":"decode","generated":{"line":82,"column":37},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":43,"column":33}},{"generated":{"line":82,"column":43},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":43,"column":20}},{"name":"msg","generated":{"line":82,"column":44},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":43,"column":40}},{"generated":{"line":82,"column":47},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":43,"column":43}},{"name":"value","generated":{"line":82,"column":48},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":43,"column":44}},{"generated":{"line":82,"column":53},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":43,"column":40}},{"name":"slice","generated":{"line":82,"column":54},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":43,"column":50}},{"generated":{"line":82,"column":59},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":43,"column":40}},{"generated":{"line":82,"column":61},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":43,"column":20}},{"generated":{"line":82,"column":62},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"name":"log","generated":{"line":83,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":44,"column":6}},{"name":"log","generated":{"line":83,"column":16},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":44,"column":6}},{"generated":{"line":83,"column":19},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":44,"column":9}},{"generated":{"line":83,"column":20},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":44,"column":10}},{"generated":{"line":83,"column":39},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":44,"column":9}},{"name":"value","generated":{"line":83,"column":41},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":44,"column":31}},{"generated":{"line":83,"column":46},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":44,"column":36}},{"name":"type","generated":{"line":83,"column":47},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":44,"column":37}},{"generated":{"line":83,"column":51},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":44,"column":9}},{"generated":{"line":83,"column":52},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":44,"column":6}},{"generated":{"line":84,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"name":"value","generated":{"line":84,"column":49},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":45,"column":13}},{"generated":{"line":84,"column":54},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":86,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"name":"log","generated":{"line":87,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":48,"column":4}},{"name":"log","generated":{"line":87,"column":16},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":48,"column":4}},{"generated":{"line":87,"column":19},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":48,"column":7}},{"generated":{"line":87,"column":20},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":48,"column":8}},{"generated":{"line":87,"column":60},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":48,"column":7}},{"generated":{"line":87,"column":61},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":48,"column":4}},{"generated":{"line":87,"column":62},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":87,"column":63},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":49,"column":4}},{"generated":{"line":89,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":50,"column":4}},{"name":"close","generated":{"line":89,"column":21},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":50,"column":9}},{"generated":{"line":89,"column":26},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":50,"column":4}},{"generated":{"line":91,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":92,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":93,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":94,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":95,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":96,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":97,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":40,"column":2}},{"generated":{"line":105,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":53,"column":2}},{"generated":{"line":106,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":54,"column":0}},{"generated":{"line":107,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":55,"column":0}},{"generated":{"line":108,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":56,"column":0}},{"generated":{"line":109,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":57,"column":0}},{"generated":{"line":110,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":58,"column":0}},{"generated":{"line":114,"column":11},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":59,"column":2}},{"name":"msg","generated":{"line":114,"column":26},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":59,"column":9}},{"generated":{"line":114,"column":29},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":59,"column":2}},{"generated":{"line":114,"column":31},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":59,"column":14}},{"name":"log","generated":{"line":115,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":60,"column":4}},{"name":"log","generated":{"line":115,"column":6},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":60,"column":4}},{"generated":{"line":115,"column":9},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":60,"column":7}},{"generated":{"line":115,"column":10},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":60,"column":8}},{"generated":{"line":115,"column":33},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":60,"column":7}},{"name":"msg","generated":{"line":115,"column":35},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":60,"column":33}},{"generated":{"line":115,"column":38},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":60,"column":36}},{"name":"type","generated":{"line":115,"column":39},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":60,"column":37}},{"generated":{"line":115,"column":43},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":60,"column":7}},{"generated":{"line":115,"column":44},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":60,"column":4}},{"generated":{"line":115,"column":45},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":59,"column":14}},{"generated":{"line":115,"column":46},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":61,"column":4}},{"generated":{"line":117,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":62,"column":4}},{"name":"shake","generated":{"line":117,"column":11},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":62,"column":9}},{"generated":{"line":117,"column":16},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":62,"column":4}},{"name":"write","generated":{"line":117,"column":17},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":62,"column":15}},{"generated":{"line":117,"column":22},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":62,"column":4}},{"name":"lp","generated":{"line":117,"column":23},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":62,"column":21}},{"generated":{"line":117,"column":25},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":62,"column":23}},{"name":"encode","generated":{"line":117,"column":26},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":62,"column":24}},{"generated":{"line":117,"column":32},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":62,"column":21}},{"name":"single","generated":{"line":117,"column":33},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":62,"column":31}},{"generated":{"line":117,"column":39},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":62,"column":21}},{"name":"CircuitRelay","generated":{"line":117,"column":40},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":62,"column":38}},{"generated":{"line":117,"column":52},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":62,"column":50}},{"name":"encode","generated":{"line":117,"column":53},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":62,"column":51}},{"generated":{"line":117,"column":59},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":62,"column":38}},{"name":"msg","generated":{"line":117,"column":60},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":62,"column":58}},{"generated":{"line":117,"column":63},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":62,"column":38}},{"name":"finish","generated":{"line":117,"column":65},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":62,"column":63}},{"generated":{"line":117,"column":71},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":62,"column":38}},{"generated":{"line":117,"column":73},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":62,"column":21}},{"generated":{"line":117,"column":74},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":62,"column":4}},{"generated":{"line":118,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":63,"column":3}},{"generated":{"line":119,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":65,"column":2}},{"generated":{"line":120,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":66,"column":0}},{"generated":{"line":121,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":67,"column":0}},{"generated":{"line":122,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":68,"column":0}},{"generated":{"line":123,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":69,"column":0}},{"generated":{"line":127,"column":11},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":70,"column":2}},{"generated":{"line":127,"column":27},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":70,"column":10}},{"generated":{"line":128,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":71,"column":4}},{"name":"shake","generated":{"line":128,"column":11},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":71,"column":9}},{"generated":{"line":128,"column":16},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":71,"column":4}},{"name":"rest","generated":{"line":128,"column":17},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":71,"column":15}},{"generated":{"line":128,"column":21},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":71,"column":4}},{"generated":{"line":129,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":72,"column":4}},{"generated":{"line":129,"column":13},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":72,"column":11}},{"name":"shake","generated":{"line":129,"column":18},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":72,"column":16}},{"generated":{"line":129,"column":23},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":72,"column":11}},{"name":"stream","generated":{"line":129,"column":24},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":72,"column":22}},{"generated":{"line":129,"column":30},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":72,"column":4}},{"generated":{"line":130,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":73,"column":3}},{"generated":{"line":131,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":75,"column":2}},{"generated":{"line":132,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":76,"column":0}},{"generated":{"line":133,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":77,"column":0}},{"generated":{"line":137,"column":11},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":78,"column":2}},{"name":"msg","generated":{"line":137,"column":24},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":78,"column":7}},{"generated":{"line":137,"column":27},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":78,"column":2}},{"generated":{"line":137,"column":29},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":78,"column":12}},{"generated":{"line":138,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":79,"column":4}},{"name":"write","generated":{"line":138,"column":11},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":79,"column":9}},{"generated":{"line":138,"column":16},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":79,"column":4}},{"name":"msg","generated":{"line":138,"column":17},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":79,"column":15}},{"generated":{"line":138,"column":20},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":79,"column":4}},{"generated":{"line":139,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":80,"column":4}},{"name":"close","generated":{"line":139,"column":11},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":80,"column":9}},{"generated":{"line":139,"column":16},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":80,"column":4}},{"generated":{"line":140,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":81,"column":3}},{"generated":{"line":141,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":83,"column":2}},{"generated":{"line":142,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":84,"column":0}},{"generated":{"line":143,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":85,"column":0}},{"generated":{"line":144,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":86,"column":0}},{"generated":{"line":145,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":87,"column":0}},{"generated":{"line":149,"column":11},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":88,"column":2}},{"generated":{"line":149,"column":28},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":88,"column":11}},{"name":"log","generated":{"line":150,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":89,"column":4}},{"name":"log","generated":{"line":150,"column":6},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":89,"column":4}},{"generated":{"line":150,"column":9},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":89,"column":7}},{"generated":{"line":150,"column":10},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":89,"column":8}},{"generated":{"line":150,"column":30},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":89,"column":7}},{"generated":{"line":150,"column":31},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":89,"column":4}},{"generated":{"line":151,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":90,"column":4}},{"name":"rest","generated":{"line":151,"column":11},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":90,"column":9}},{"generated":{"line":151,"column":15},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":90,"column":4}},{"name":"sink","generated":{"line":151,"column":18},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":90,"column":16}},{"generated":{"line":151,"column":22},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":90,"column":4}},{"generated":{"line":151,"column":23},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":90,"column":21}},{"generated":{"line":151,"column":25},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":90,"column":4}},{"generated":{"line":152,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":91,"column":3}},{"name":"module","generated":{"line":158,"column":0},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":94,"column":0}},{"generated":{"line":158,"column":6},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":94,"column":6}},{"name":"exports","generated":{"line":158,"column":7},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":94,"column":7}},{"generated":{"line":158,"column":14},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":94,"column":0}},{"name":"StreamHandler","generated":{"line":158,"column":17},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":94,"column":17}},{"generated":{"line":158,"column":30},"source":"../node_modules/libp2p/src/circuit/circuit/stream-handler.js","original":{"line":94,"column":0}}],"sources":{"../node_modules/libp2p/src/circuit/circuit/stream-handler.js":"'use strict'\n\nconst debug = require('debug')\nconst log = Object.assign(debug('libp2p:circuit:stream-handler'), {\n  error: debug('libp2p:circuit:stream-handler:err')\n})\n\nconst lp = require('it-length-prefixed')\n// @ts-ignore it-handshake does not export types\nconst handshake = require('it-handshake')\nconst { CircuitRelay } = require('../protocol')\n\n/**\n * @typedef {import('libp2p-interfaces/src/stream-muxer/types').MuxedStream} MuxedStream\n * @typedef {import('../protocol').ICircuitRelay} ICircuitRelay\n */\n\nclass StreamHandler {\n  /**\n   * Create a stream handler for connection\n   *\n   * @class\n   * @param {object} options\n   * @param {MuxedStream} options.stream - A duplex iterable\n   * @param {number} [options.maxLength = 4096] - max bytes length of message\n   */\n  constructor ({ stream, maxLength = 4096 }) {\n    this.stream = stream\n\n    this.shake = handshake(this.stream)\n    // @ts-ignore options are not optional\n    this.decoder = lp.decode.fromReader(this.shake.reader, { maxDataLength: maxLength })\n  }\n\n  /**\n   * Read and decode message\n   *\n   * @async\n   */\n  async read () {\n    const msg = await this.decoder.next()\n    if (msg.value) {\n      const value = CircuitRelay.decode(msg.value.slice())\n      log('read message type', value.type)\n      return value\n    }\n\n    log('read received no value, closing stream')\n    // End the stream, we didn't get data\n    this.close()\n  }\n\n  /**\n   * Encode and write array of buffers\n   *\n   * @param {ICircuitRelay} msg - An unencoded CircuitRelay protobuf message\n   * @returns {void}\n   */\n  write (msg) {\n    log('write message type %s', msg.type)\n    // @ts-ignore lp.encode expects type type 'Buffer | BufferList', not 'Uint8Array'\n    this.shake.write(lp.encode.single(CircuitRelay.encode(msg).finish()))\n  }\n\n  /**\n   * Return the handshake rest stream and invalidate handler\n   *\n   * @returns {*} A duplex iterable\n   */\n  rest () {\n    this.shake.rest()\n    return this.shake.stream\n  }\n\n  /**\n   * @param {ICircuitRelay} msg - An unencoded CircuitRelay protobuf message\n   */\n  end (msg) {\n    this.write(msg)\n    this.close()\n  }\n\n  /**\n   * Close the stream\n   *\n   * @returns {void}\n   */\n  close () {\n    log('closing the stream')\n    this.rest().sink([])\n  }\n}\n\nmodule.exports = StreamHandler\n"},"lineCount":null}},"error":null,"hash":"cb9524db7c7ec49a5005e2ce74e54658","cacheData":{"env":{}}}